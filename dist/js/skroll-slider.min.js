let sliders=document.getElementsByClassName("skroll-slider");for(var sliderObjects=[],i=0;i<sliders.length;i++){var el=sliders[i],num=el.children.length,slides=el.querySelectorAll("div"),imgElements=el.querySelectorAll("img"),imgUrls=Array.from(el.querySelectorAll("img")).map(function(e,s){return e.src});sliderObjects[i]={slider:el,img:imgElements,slides:slides,imgUrls:imgUrls,settings:{num:num,zoom:!0,paused:!1,slideIndex:0,duration:5e3,transition:"pan"}};var settings=JSON.parse(el.dataset.skroll);for(const e of Object.keys(settings))sliderObjects[i].settings[e]=settings[e];sliderConstruct(sliderObjects[i]),autoSlide(sliderObjects[i])}function sliderConstruct(e){e.slider.classList.add(e.settings.zoom?"zoom":null,e.settings.transition);var s=document.createDocumentFragment(),t=document.createElement("DIV");t.setAttribute("class","arrows");var i=document.createElement("DIV");i.setAttribute("class","slide-arrow left-arrow");var n=document.createElement("DIV");n.setAttribute("class","slide-arrow right-arrow"),t.appendChild(i),t.appendChild(n),s.prepend(t),e.arrows=[i,n];var r=document.createElement("DIV");r.setAttribute("class","slides"),"pan"===e.settings.transition&&(r.style.width=e.settings.num+"00%");for(let s=0;s<e.settings.num;s++){e.slides[s].removeChild(e.img[s]),0===s?e.slides[s].classList.add("slide-wrap","current-slide"):e.slides[s].classList.add("slide-wrap");var d=document.createElement("DIV");d.style.backgroundImage="url("+e.imgUrls[s]+")",d.setAttribute("class","slide"),e.slides[s].appendChild(d),r.appendChild(e.slides[s])}s.appendChild(r),delete e.img,console.log(s),e.indicators={};var l=document.createElement("DIV");l.setAttribute("class","indicators");for(let t=0;t<e.settings.num;t++){var a=document.createElement("SPAN");0===t?a.setAttribute("class","slide-indicator current-indicator"):a.setAttribute("class","slide-indicator"),a.setAttribute("data-slide",t),l.appendChild(a),s.appendChild(l),e.indicators[t]=a}setBindings(e)}function setBindings(e){for(var s=0;s<e.arrows.length;s++)e.arrows[s].addEventListener("click",function(s){if(e.prevSlideIndex=e.settings.slideIndex,s.target.classList.contains("left-arrow"))var t=e.settings.slideIndex-1;else if(s.target.classList.contains("right-arrow"))t=e.settings.slideIndex+1;updateIndex(e,t),clearTimeouts(e),e.settings.paused=!0,sliderChange(e)});for(s=0;s<e.settings.num;s++)e.indicators[s].addEventListener("click",function(s){clearTimeouts(e),updateIndex(e,Number(s.target.dataset.slide)),e.settings.paused=!0,!1===s.target.classList.contains("current-indicator")&&sliderChange(e)})}function sliderChange(e){if(e.prev=e.slider.getElementsByClassName("current-slide")[0],e.settings.slideIndex<0?(e.settings.slideIndex=e.settings.num-1,e.settings.num&&e.indicators[0].parentElement.classList.add("transition-last"),setTimeout(function(){e.settings.num&&e.indicators[0].parentElement.classList.remove("transition-last")},1e3)):e.settings.slideIndex>e.settings.num-1&&(e.settings.slideIndex=0,e.settings.num&&e.indicators[0].parentElement.classList.add("transition-first"),setTimeout(function(){e.settings.num&&e.indicators[0].parentElement.classList.remove("transition-first")},1e3)),e.settings.num>1){e.slider.classList.remove("forwards","backwards");for(var s=0;s<e.settings.num;s++)e.slides[s].classList.remove("current-slide","prev-slide","next-slide"),e.settings.num&&e.indicators[s].classList.remove("current-indicator");e.prevSlideIndex<e.settings.slideIndex?e.slider.classList.add("forwards"):e.slider.classList.add("backwards"),e.slider.classList.add("animating"),e.prev.classList.add("prev-slide"),e.settings.slideIndex===e.settings.num-1?e.slides[0].classList.add("next-slide"):e.slides[e.settings.slideIndex+1]&&e.slides[e.settings.slideIndex+1].classList.add("next-slide"),e.slides[e.settings.slideIndex].classList.add("current-slide"),e.settings.num&&e.indicators[e.settings.slideIndex].classList.add("current-indicator"),"pan"===e.settings.transition&&(e.slider.children[1].style.transform="translateX(-"+e.settings.slideIndex/e.settings.num*100+"00%)"),e.intervalPrevAnim=setTimeout(function(){e.slider.classList.remove("animating")},1500),!1===e.settings.paused&&autoSlide(e)}}function updateIndex(e,s){e.prevSlideIndex=e.settings.slideIndex,e.settings.slideIndex=s}function autoSlide(e){e.intervalSlideChange=setTimeout(function(){var s=e.settings.slideIndex+1;updateIndex(e,s),sliderChange(e)},e.settings.duration)}function clearTimeouts(e){clearTimeout(e.intervalSlideChange),clearTimeout(e.intervalPrevAnim);for(var s=0;s<e.settings.num;s++)e.slides[s].classList.remove("prev-anim")}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNrcm9sbC1zbGlkZXIuanMiXSwibmFtZXMiOlsic2xpZGVycyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInNsaWRlck9iamVjdHMiLCJpIiwibGVuZ3RoIiwiZWwiLCJudW0iLCJjaGlsZHJlbiIsInNsaWRlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbWdFbGVtZW50cyIsImltZ1VybHMiLCJBcnJheSIsImZyb20iLCJtYXAiLCJlIiwic3JjIiwic2xpZGVyIiwiaW1nIiwic2V0dGluZ3MiLCJ6b29tIiwicGF1c2VkIiwic2xpZGVJbmRleCIsImR1cmF0aW9uIiwidHJhbnNpdGlvbiIsIkpTT04iLCJwYXJzZSIsImRhdGFzZXQiLCJza3JvbGwiLCJrZXkiLCJPYmplY3QiLCJrZXlzIiwic2xpZGVyQ29uc3RydWN0IiwiYXV0b1NsaWRlIiwiY2xhc3NMaXN0IiwiYWRkIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiYXJyb3dDb250YWluZXIiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYXJyb3dMZWZ0IiwiYXJyb3dSaWdodCIsImFwcGVuZENoaWxkIiwicHJlcGVuZCIsImFycm93cyIsInNsaWRlc0NvbnRhaW5lciIsInN0eWxlIiwid2lkdGgiLCJyZW1vdmVDaGlsZCIsInNsaWRlSW5uZXIiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJjb25zb2xlIiwibG9nIiwiaW5kaWNhdG9ycyIsImluZGljYXRvcnNDb250YWluZXIiLCJpbmRpY2F0b3IiLCJzZXRCaW5kaW5ncyIsImFkZEV2ZW50TGlzdGVuZXIiLCJwcmV2U2xpZGVJbmRleCIsInRhcmdldCIsImNvbnRhaW5zIiwidXBkYXRlSW5kZXgiLCJjbGVhclRpbWVvdXRzIiwic2xpZGVyQ2hhbmdlIiwiTnVtYmVyIiwic2xpZGUiLCJwcmV2IiwicGFyZW50RWxlbWVudCIsInNldFRpbWVvdXQiLCJyZW1vdmUiLCJ0cmFuc2Zvcm0iLCJpbnRlcnZhbFBy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QUFTYixLQUFPUyxFQUFFdUMsV0FBV3ZDLEVBQUVJLFNBQVNHLFlBQVlZLFVBQVVDLElBQUkscUJBQzVDLFFBQXhCcEIsRUFBRUksU0FBU0ssYUFDYlQsRUFBRUUsT0FBT1YsU0FBUyxHQUFHd0MsTUFBTXdCLFVBQVksZUFBaUJ4RCxFQUFFSSxTQUFTRyxXQUFhUCxFQUFFSSxTQUFTYixJQUFNLElBQU0sUUFHekdTLEVBQUV5RCxpQkFBbUJILFdBQVcsV0FDOUJ0RCxFQUFFRSxPQUFPaUIsVUFBVW9DLE9BQU8sY0FDekIsT0FDdUIsSUFBdEJ2RCxFQUFFSSxTQUFTRSxRQUNiWSxVQUFVbEIsSUFLaEIsU0FBUytDLFlBQWEvQyxFQUFFMEQsR0FDdEIxRCxFQUFFNEMsZUFBaUI1QyxFQUFFSSxTQUFTRyxXQUM5QlAsRUFBRUksU0FBU0csV0FBYW1ELEVBRzFCLFNBQVN4QyxVQUFXbEIsR0FDbEJBLEVBQUUyRCxvQkFBc0JMLFdBQVcsV0FDakMsSUFBSS9ELEVBQU1TLEVBQUVJLFNBQVNHLFdBQVcsRUFDaEN3QyxZQUFZL0MsRUFBRVQsR0FDZDBELGFBQWFqRCxJQUNaQSxFQUFFSSxTQUFTSSxVQUdoQixTQUFTd0MsY0FBZWhELEdBQ3RCNEQsYUFBYTVELEVBQUUyRCxxQkFDZkMsYUFBYTVELEVBQUV5RCxrQkFDZixJQUFLLElBQUlyRSxFQUFJLEVBQUdBLEVBQUlZLEVBQUVJLFNBQVNiLElBQUtILElBQ2xDWSxFQUFFUCxPQUFPTCxHQUFHK0IsVUFBVW9DLE9BQU8iLCJmaWxlIjoic2tyb2xsLXNsaWRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5sZXQgc2xpZGVycyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Nrcm9sbC1zbGlkZXInKVxyXG52YXIgc2xpZGVyT2JqZWN0cyA9IFtdXHJcblxyXG4vLyBDUkVBVEUgU0xJREVSIE9CSkVDVFNcclxuZm9yICh2YXIgaSA9IDA7IGkgPCBzbGlkZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgdmFyIGVsID0gc2xpZGVyc1tpXVxyXG4gIHZhciBudW0gPSBlbC5jaGlsZHJlbi5sZW5ndGhcclxuICB2YXIgc2xpZGVzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnZGl2JylcclxuICB2YXIgaW1nRWxlbWVudHMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKVxyXG4gIHZhciBpbWdVcmxzID0gQXJyYXkuZnJvbShlbC5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKSkubWFwKGZ1bmN0aW9uKGUsaSkge1xyXG4gICAgcmV0dXJuIGUuc3JjXHJcbiAgfSlcclxuICAvLyBzZXQgZGVmYXVsdHNcclxuICBzbGlkZXJPYmplY3RzW2ldID0ge3NsaWRlcjogZWwsIGltZzogaW1nRWxlbWVudHMsIHNsaWRlczogc2xpZGVzLCBpbWdVcmxzOiBpbWdVcmxzLCBzZXR0aW5nczp7bnVtOiBudW0sIHpvb206IHRydWUsIHBhdXNlZDogZmFsc2UsIHNsaWRlSW5kZXg6IDAsIGR1cmF0aW9uOiA1MDAwLCB0cmFuc2l0aW9uOiBcInBhblwifX1cclxuICAvLyBnZXQgc2V0dGluZ3MgZnJvbSBkYXRhIGF0dHJpYnV0ZVxyXG4gIHZhciBzZXR0aW5ncyA9IEpTT04ucGFyc2UoZWwuZGF0YXNldC5za3JvbGwpXHJcbiAgLy8gdXBkYXRlIG9iamVjdFxyXG4gIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHNldHRpbmdzKSkge1xyXG4gICAgc2xpZGVyT2JqZWN0c1tpXS5zZXR0aW5nc1trZXldID0gc2V0dGluZ3Nba2V5XVxyXG4gIH1cclxuICBzbGlkZXJDb25zdHJ1Y3Qoc2xpZGVyT2JqZWN0c1tpXSlcclxuICBhdXRvU2xpZGUoc2xpZGVyT2JqZWN0c1tpXSlcclxufVxyXG5cclxuLy8gQ09OU1RSVUNUIERPTSBFTEVNRU5UU1xyXG5mdW5jdGlvbiBzbGlkZXJDb25zdHJ1Y3QoZSkge1xyXG5cclxuICAvLyBzZXQgY29udGFpbmVyIGNsYXNzZXNcclxuICBlLnNsaWRlci5jbGFzc0xpc3QuYWRkKChlLnNldHRpbmdzLnpvb20gPyAnem9vbScgOiBudWxsKSwgZS5zZXR0aW5ncy50cmFuc2l0aW9uKVxyXG5cclxuICB2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG4gIC8vIGNyZWF0ZSBhcnJvd3NcclxuICB2YXIgYXJyb3dDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpXHJcbiAgYXJyb3dDb250YWluZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJhcnJvd3NcIilcclxuICB2YXIgYXJyb3dMZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkRJVlwiKVxyXG4gIGFycm93TGVmdC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLFwic2xpZGUtYXJyb3cgbGVmdC1hcnJvd1wiKVxyXG4gIHZhciBhcnJvd1JpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkRJVlwiKVxyXG4gIGFycm93UmlnaHQuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixcInNsaWRlLWFycm93IHJpZ2h0LWFycm93XCIpXHJcbiAgYXJyb3dDb250YWluZXIuYXBwZW5kQ2hpbGQoYXJyb3dMZWZ0KVxyXG4gIGFycm93Q29udGFpbmVyLmFwcGVuZENoaWxkKGFycm93UmlnaHQpXHJcbiAgZnJhZ21lbnQucHJlcGVuZChhcnJvd0NvbnRhaW5lcilcclxuICBlLmFycm93cyA9IFthcnJvd0xlZnQsYXJyb3dSaWdodF1cclxuXHJcbiAgLy8gY3JlYXRlIHNsaWRlIGVsZW1lbnRzXHJcbiAgdmFyIHNsaWRlc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJESVZcIilcclxuICBzbGlkZXNDb250YWluZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJzbGlkZXNcIilcclxuICAvLyBzZXQgY29udGFpbmVyIHdpZHRoXHJcbiAgaWYgKGUuc2V0dGluZ3MudHJhbnNpdGlvbj09PVwicGFuXCIpIHtcclxuICAgIHNsaWRlc0NvbnRhaW5lci5zdHlsZS53aWR0aCA9IGUuc2V0dGluZ3MubnVtICsgJzAwJSdcclxuICB9XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBlLnNldHRpbmdzLm51bTsgaSsrKSB7XHJcbiAgICBlLnNsaWRlc1tpXS5yZW1vdmVDaGlsZChlLmltZ1tpXSlcclxuICAgIGlmIChpPT09MCkge1xyXG4gICAgICBlLnNsaWRlc1tpXS5jbGFzc0xpc3QuYWRkKCdzbGlkZS13cmFwJywgJ2N1cnJlbnQtc2xpZGUnKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZS5zbGlkZXNbaV0uY2xhc3NMaXN0LmFkZCgnc2xpZGUtd3JhcCcpXHJcbiAgICB9XHJcbiAgICB2YXIgc2xpZGVJbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJESVZcIilcclxuICAgIHNsaWRlSW5uZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoXCIgKyBlLmltZ1VybHNbaV0gKyBcIilcIlxyXG4gICAgc2xpZGVJbm5lci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInNsaWRlXCIpXHJcbiAgICBlLnNsaWRlc1tpXS5hcHBlbmRDaGlsZChzbGlkZUlubmVyKSAvL05FRUQgVE8gQVBQRU5EIFRISVMgVE8gT1RIRVIgT0JKRUNUIEZJUlNUXHJcbiAgICBzbGlkZXNDb250YWluZXIuYXBwZW5kQ2hpbGQoZS5zbGlkZXNbaV0pXHJcbiAgfVxyXG4gIGZyYWdtZW50LmFwcGVuZENoaWxkKHNsaWRlc0NvbnRhaW5lcilcclxuICBkZWxldGUgZS5pbWdcclxuICBjb25zb2xlLmxvZyhmcmFnbWVudClcclxuXHJcbiAgLy8gY3JlYXRlIGluZGljYXRvciBlbGVtZW50c1xyXG4gIGUuaW5kaWNhdG9ycyA9IHt9XHJcbiAgdmFyIGluZGljYXRvcnNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpXHJcbiAgaW5kaWNhdG9yc0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImluZGljYXRvcnNcIilcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZS5zZXR0aW5ncy5udW07IGkrKykge1xyXG4gICAgdmFyIGluZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJTUEFOXCIpO1xyXG4gICAgaWYgKGk9PT0wKSB7XHJcbiAgICAgIGluZGljYXRvci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLFwic2xpZGUtaW5kaWNhdG9yIGN1cnJlbnQtaW5kaWNhdG9yXCIpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpbmRpY2F0b3Iuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixcInNsaWRlLWluZGljYXRvclwiKVxyXG4gICAgfVxyXG4gICAgaW5kaWNhdG9yLnNldEF0dHJpYnV0ZShcImRhdGEtc2xpZGVcIixpKVxyXG4gICAgaW5kaWNhdG9yc0NvbnRhaW5lci5hcHBlbmRDaGlsZChpbmRpY2F0b3IpXHJcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChpbmRpY2F0b3JzQ29udGFpbmVyKVxyXG4gICAgZS5pbmRpY2F0b3JzW2ldID0gaW5kaWNhdG9yXHJcbiAgfVxyXG5cclxuICAvLyBhcHBseSBjaGFuZ2VzIHRvIGRvbVxyXG4gIC8vIGUuc2xpZGVyLmFwcGVuZENoaWxkKGZyYWdtZW50KVxyXG4gIHNldEJpbmRpbmdzKGUpXHJcbn1cclxuXHJcbi8vIENSRUFURSBCSU5ESU5HUyBGT1IgQVJST1dTIEFORCBJTkRJQ0FUT1JTXHJcbmZ1bmN0aW9uIHNldEJpbmRpbmdzKGUpIHtcclxuXHJcbiAgICAvLyBiaW5kIGFycm93IGNsaWNrIGZ1bmN0aW9uc1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlLmFycm93cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBlLmFycm93c1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGUucHJldlNsaWRlSW5kZXggPSBlLnNldHRpbmdzLnNsaWRlSW5kZXhcclxuICAgICAgICBpZiAoZWwudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbGVmdC1hcnJvdycpKSB7XHJcbiAgICAgICAgICB2YXIgbnVtID0gZS5zZXR0aW5ncy5zbGlkZUluZGV4LTFcclxuICAgICAgICB9IGVsc2UgaWYgKGVsLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3JpZ2h0LWFycm93JykpIHtcclxuICAgICAgICAgIHZhciBudW0gPSBlLnNldHRpbmdzLnNsaWRlSW5kZXgrMVxyXG4gICAgICAgIH1cclxuICAgICAgICB1cGRhdGVJbmRleChlLG51bSlcclxuICAgICAgICBjbGVhclRpbWVvdXRzKGUpXHJcbiAgICAgICAgZS5zZXR0aW5ncy5wYXVzZWQgPSB0cnVlXHJcbiAgICAgICAgc2xpZGVyQ2hhbmdlKGUpXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgXHJcbiAgICAvLyBiaW5kIGluZGljYXRvciBjbGljayBmdW5jdGlvbnNcclxuICAgIGZvciAoaSA9IDA7IGkgPCBlLnNldHRpbmdzLm51bTsgaSsrKSB7XHJcbiAgICAgIGUuaW5kaWNhdG9yc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dHMoZSlcclxuICAgICAgICB1cGRhdGVJbmRleChlLE51bWJlcihlbC50YXJnZXQuZGF0YXNldC5zbGlkZSkpXHJcbiAgICAgICAgZS5zZXR0aW5ncy5wYXVzZWQgPSB0cnVlXHJcbiAgICAgICAgaWYgKGVsLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2N1cnJlbnQtaW5kaWNhdG9yJykgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICBzbGlkZXJDaGFuZ2UoZSlcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIGZ1bmN0aW9uIHNsaWRlckluaXQgKGUpIHtcclxuLy8gICBjb25zb2xlLmxvZyhlKVxyXG4vLyAgIC8vIFNFVCBIRUlHSFRcclxuLy8gICBlLmhlaWdodCA9IDBcclxuLy8gICAvLyBTRVQgV0lEVEhcclxuLy8gICBpZiAoZS5zbGlkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdwYW4nKSkge1xyXG4vLyAgICAgLy8gZS5zbGlkZXNXcmFwLnN0eWxlLndpZHRoID0gZS5zZXR0aW5ncy5udW0gKyAnMDAlJ1xyXG4vLyAgIH1cclxuLy8gICAvLyBTRVQgRklSU1QgU0xJREUgQVMgQ1VSUkVOVFxyXG4vLyAgIGUuc2xpZGVzWzBdLmNsYXNzTGlzdC5hZGQoJ2N1cnJlbnQtc2xpZGUnKVxyXG4vLyAgIGUuaW5kaWNhdG9ycyA9IHt9XHJcbi8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlLnNldHRpbmdzLm51bTsgaSsrKSB7XHJcbi8vICAgICBlLnNsaWRlc1tpXS5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2xpZGUnLCBpKVxyXG4vLyAgICAgLy8gQ1JFQVRFIElORElDQVRPUlNcclxuLy8gICAgIHZhciBpbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiU1BBTlwiKTtcclxuLy8gICAgIGlmIChpPT09MCkge1xyXG4vLyAgICAgICBpbmRpY2F0b3Iuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixcInNsaWRlLWluZGljYXRvciBjdXJyZW50LWluZGljYXRvclwiKVxyXG4vLyAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgaW5kaWNhdG9yLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsXCJzbGlkZS1pbmRpY2F0b3JcIilcclxuLy8gICAgIH1cclxuLy8gICAgIGluZGljYXRvci5zZXRBdHRyaWJ1dGUoXCJkYXRhLXNsaWRlXCIsaSlcclxuLy8gICAgIGUuc2xpZGVyLmNoaWxkcmVuWzFdLmFwcGVuZENoaWxkKGluZGljYXRvcilcclxuLy8gICAgIGUuaW5kaWNhdG9yc1tpXSA9IGluZGljYXRvclxyXG4vLyAgICAgLy8gQ0FMQ1VMQVRFIEhFSUdIVCBCQVNFRCBPTiBURVhUXHJcbi8vICAgICBsZXQgdGV4dEhlaWdodCA9IGUuc2xpZGVzW2ldLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NsaWRlLXRleHQnKVswXS5vZmZzZXRIZWlnaHRcclxuLy8gICAgIGlmIChlLmhlaWdodCA8IHRleHRIZWlnaHQpIHtcclxuLy8gICAgICAgZS5oZWlnaHQgPSB0ZXh0SGVpZ2h0XHJcbi8vICAgICB9XHJcbi8vICAgfVxyXG4vLyAgIGUuaGVpZ2h0ICs9IDI1MFxyXG4vLyAgIGRvY3VtZW50LnN0eWxlU2hlZXRzWzBdLmluc2VydFJ1bGUoJyMnICsgZS5zbGlkZXIuaWQgKyAnOm5vdCgjdG9wLWNvbnRlbnQpIHttaW4taGVpZ2h0OiAnICsgZS5oZWlnaHQgKyAncHg7fScpXHJcblxyXG4vLyAgIC8vIEJJTkQgQVJST1cgQ0xJQ0sgRlVOQ1RJT05TXHJcbi8vICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlLmFycm93cy5sZW5ndGg7IGkrKykge1xyXG4vLyAgICAgZS5hcnJvd3NbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZWwpIHtcclxuLy8gICAgICAgZS5wcmV2U2xpZGVJbmRleCA9IGUuc2V0dGluZ3Muc2xpZGVJbmRleFxyXG4vLyAgICAgICBpZiAoZWwudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYXJyb3ctbGVmdCcpKSB7XHJcbi8vICAgICAgICAgdmFyIG51bSA9IGUuc2V0dGluZ3Muc2xpZGVJbmRleC0xXHJcbi8vICAgICAgIH0gZWxzZSBpZiAoZWwudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYXJyb3ctcmlnaHQnKSkge1xyXG4vLyAgICAgICAgIHZhciBudW0gPSBlLnNldHRpbmdzLnNsaWRlSW5kZXgrMVxyXG4vLyAgICAgICB9XHJcbi8vICAgICAgIHVwZGF0ZUluZGV4KGUsbnVtKVxyXG4vLyAgICAgICBjbGVhclRpbWVvdXRzKGUpXHJcbi8vICAgICAgIGUuc2V0dGluZ3MucGF1c2VkID0gdHJ1ZVxyXG4vLyAgICAgICBzbGlkZXJDaGFuZ2UoZSlcclxuLy8gICAgIH0pXHJcbi8vICAgfVxyXG5cclxuLy8gICAvLyBCSU5EIElORElDQVRPUiBDTElDSyBGVU5DVElPTlNcclxuLy8gICBmb3IgKGkgPSAwOyBpIDwgZS5zZXR0aW5ncy5udW07IGkrKykge1xyXG4vLyAgICAgZS5pbmRpY2F0b3JzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGVsKSB7XHJcbi8vICAgICAgIGNsZWFyVGltZW91dHMoZSlcclxuLy8gICAgICAgdXBkYXRlSW5kZXgoZSxOdW1iZXIoZWwudGFyZ2V0LmRhdGFzZXQuc2xpZGUpKVxyXG4vLyAgICAgICBlLnNldHRpbmdzLnBhdXNlZCA9IHRydWVcclxuLy8gICAgICAgaWYgKGVsLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2N1cnJlbnQtaW5kaWNhdG9yJykgPT09IGZhbHNlKSB7XHJcbi8vICAgICAgICAgc2xpZGVyQ2hhbmdlKGUpXHJcbi8vICAgICAgIH1cclxuLy8gICAgIH0pXHJcbi8vICAgfVxyXG4vLyB9XHJcblxyXG5mdW5jdGlvbiBzbGlkZXJDaGFuZ2UgKGUpIHtcclxuICBlLnByZXYgPSBlLnNsaWRlci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjdXJyZW50LXNsaWRlJylbMF1cclxuXHJcbiAgLy8gY2FsY3VsYXRlIHNsaWRlIGluZGV4XHJcbiAgaWYgKGUuc2V0dGluZ3Muc2xpZGVJbmRleCA8IDApIHtcclxuICAgIGUuc2V0dGluZ3Muc2xpZGVJbmRleCA9IGUuc2V0dGluZ3MubnVtIC0gMVxyXG4gICAgaWYgKGUuc2V0dGluZ3MubnVtKSB7IGUuaW5kaWNhdG9yc1swXS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3RyYW5zaXRpb24tbGFzdCcpIH1cclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZiAoZS5zZXR0aW5ncy5udW0pIHsgZS5pbmRpY2F0b3JzWzBdLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgndHJhbnNpdGlvbi1sYXN0JykgfVxyXG4gICAgfSwgMTAwMClcclxuICB9IGVsc2UgaWYgKGUuc2V0dGluZ3Muc2xpZGVJbmRleCA+IGUuc2V0dGluZ3MubnVtIC0gMSkge1xyXG4gICAgZS5zZXR0aW5ncy5zbGlkZUluZGV4ID0gMFxyXG4gICAgaWYgKGUuc2V0dGluZ3MubnVtKSB7IGUuaW5kaWNhdG9yc1swXS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3RyYW5zaXRpb24tZmlyc3QnKSB9XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKGUuc2V0dGluZ3MubnVtKSB7IGUuaW5kaWNhdG9yc1swXS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3RyYW5zaXRpb24tZmlyc3QnKSB9XHJcbiAgICB9LCAxMDAwKVxyXG4gIH1cclxuXHJcbiAgLy8gc2V0IGNsYXNzZXMgYmFzZWQgb24gc2xpZGUgaW5kZXhcclxuICBpZiAoZS5zZXR0aW5ncy5udW0gPiAxKSB7XHJcbiAgICAvLyByZW1vdmUgY3VycmVudCBzdHlsZXNcclxuICAgIGUuc2xpZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvcndhcmRzJywgJ2JhY2t3YXJkcycpXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGUuc2V0dGluZ3MubnVtOyBpKyspIHtcclxuICAgICAgZS5zbGlkZXNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnY3VycmVudC1zbGlkZScsICdwcmV2LXNsaWRlJywgJ25leHQtc2xpZGUnKVxyXG4gICAgICBpZiAoZS5zZXR0aW5ncy5udW0pIHsgZS5pbmRpY2F0b3JzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2N1cnJlbnQtaW5kaWNhdG9yJykgfVxyXG4gICAgfVxyXG4gICAgLy8gYWRkIGRpcmVjdGlvbiBjbGFzc1xyXG4gICAgaWYgKGUucHJldlNsaWRlSW5kZXggPCBlLnNldHRpbmdzLnNsaWRlSW5kZXgpIHtcclxuICAgICAgZS5zbGlkZXIuY2xhc3NMaXN0LmFkZCgnZm9yd2FyZHMnKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZS5zbGlkZXIuY2xhc3NMaXN0LmFkZCgnYmFja3dhcmRzJylcclxuICAgIH1cclxuXHJcbiAgICBlLnNsaWRlci5jbGFzc0xpc3QuYWRkKCdhbmltYXRpbmcnKVxyXG5cclxuICAgIC8vIGFkZCBwcmV2aW91cyBzbGlkZVxyXG4gICAgZS5wcmV2LmNsYXNzTGlzdC5hZGQoJ3ByZXYtc2xpZGUnKVxyXG5cclxuICAgIGlmIChlLnNldHRpbmdzLnNsaWRlSW5kZXggPT09IGUuc2V0dGluZ3MubnVtIC0gMSkge1xyXG4gICAgICBlLnNsaWRlc1swXS5jbGFzc0xpc3QuYWRkKCduZXh0LXNsaWRlJylcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChlLnNsaWRlc1tlLnNldHRpbmdzLnNsaWRlSW5kZXggKyAxXSkge1xyXG4gICAgICAgIGUuc2xpZGVzW2Uuc2V0dGluZ3Muc2xpZGVJbmRleCArIDFdLmNsYXNzTGlzdC5hZGQoJ25leHQtc2xpZGUnKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZS5zbGlkZXNbZS5zZXR0aW5ncy5zbGlkZUluZGV4XS5jbGFzc0xpc3QuYWRkKCdjdXJyZW50LXNsaWRlJylcclxuICAgIGlmIChlLnNldHRpbmdzLm51bSkgeyBlLmluZGljYXRvcnNbZS5zZXR0aW5ncy5zbGlkZUluZGV4XS5jbGFzc0xpc3QuYWRkKCdjdXJyZW50LWluZGljYXRvcicpIH1cclxuICAgIGlmIChlLnNldHRpbmdzLnRyYW5zaXRpb249PT1cInBhblwiKSB7XHJcbiAgICAgIGUuc2xpZGVyLmNoaWxkcmVuWzFdLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKC0nICsgZS5zZXR0aW5ncy5zbGlkZUluZGV4IC8gZS5zZXR0aW5ncy5udW0gKiAxMDAgKyAnMDAlKSdcclxuICAgIH1cclxuXHJcbiAgICBlLmludGVydmFsUHJldkFuaW0gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgZS5zbGlkZXIuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0aW5nJylcclxuICAgIH0sIDE1MDApXHJcbiAgICBpZiAoZS5zZXR0aW5ncy5wYXVzZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgIGF1dG9TbGlkZShlKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlSW5kZXggKGUsbikge1xyXG4gIGUucHJldlNsaWRlSW5kZXggPSBlLnNldHRpbmdzLnNsaWRlSW5kZXhcclxuICBlLnNldHRpbmdzLnNsaWRlSW5kZXggPSBuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGF1dG9TbGlkZSAoZSkge1xyXG4gIGUuaW50ZXJ2YWxTbGlkZUNoYW5nZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG51bSA9IGUuc2V0dGluZ3Muc2xpZGVJbmRleCsxXHJcbiAgICB1cGRhdGVJbmRleChlLG51bSlcclxuICAgIHNsaWRlckNoYW5nZShlKVxyXG4gIH0sIGUuc2V0dGluZ3MuZHVyYXRpb24pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyVGltZW91dHMgKGUpIHtcclxuICBjbGVhclRpbWVvdXQoZS5pbnRlcnZhbFNsaWRlQ2hhbmdlKVxyXG4gIGNsZWFyVGltZW91dChlLmludGVydmFsUHJldkFuaW0pXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBlLnNldHRpbmdzLm51bTsgaSsrKSB7XHJcbiAgICBlLnNsaWRlc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdwcmV2LWFuaW0nKVxyXG4gIH1cclxufVxyXG4iXX0=
