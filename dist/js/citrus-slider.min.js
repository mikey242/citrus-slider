"use strict";var getSliders=function(){var t=[];class e{constructor(t){this.sliderContainer=t,this.slideText=function(t){var e={};for(let s=0;s<t.length;s++)e[s]=t[s];return e}(t.children),this.num=t.children.length,this.imgUrls=function(t){return Array.from(t.children).map(function(t,e){var s=t.getElementsByTagName("img")[0].src;return t.getElementsByTagName("img")[0].remove(),s})}(t),this.settings={animateText:!0,animationDuration:.8,autoHeight:!1,autoPause:!0,effect:!0,effectType:"zoom",height:"100%",paused:!1,showArrows:!0,showIndicators:!0,slideDuration:5e3,slideIndex:0,slideTransition:"pan",width:"100%"}}}e.prototype.goToSlide=function(t){this.settings.slideIndex=t,d(this)},e.prototype.stop=function(){},e.prototype.prevSlide=function(){this.settings.slideIndex--,d(this)},e.prototype.nextSlide=function(){this.settings.slideIndex++,d(this)},e.prototype.reset=function(){a(this),l(this)};let s=document.getElementsByClassName("citrus-slider");for(var i=0;i<s.length;i++){t[i]=new e(s[i]);var n=t[i];r(n,a),l(n)}function r(t,e){if(t.sliderContainer.hasAttribute("data-citrus")){var s=JSON.parse(t.sliderContainer.dataset.citrus);for(const e of Object.keys(s))t.settings[e]=s[e];t.sliderContainer.removeAttribute("data-citrus"),t.settings.slideIndex>t.num||t.settings.slideIndex<=0?t.settings.slideIndex=0:t.settings.slideIndex--}"function"==typeof e&&e(t)}function a(t){var e=t.settings.height;!0===t.settings.autoHeight&&(e=function(t){var e=0;for(let s=0;s<t.num;s++){let i=t.slideText[s].offsetHeight;e<i&&(e=i)}return(e+=250)+"px"}(t)),t.sliderContainer.setAttribute("style","width:"+t.settings.width+"; height:"+e),t.sliderContainer.setAttribute("class","citrus-slider"),t.sliderContainer.classList.add("transition-"+t.settings.slideTransition),t.settings.effect&&t.sliderContainer.classList.add("effect-"+t.settings.effectType),t.settings.animateText&&t.sliderContainer.classList.add("animate-text"),function(t){var e=document.createDocumentFragment(),s=document.createElement("DIV");0==t.settings.showArrows?s.setAttribute("class","citrus-arrows hidden"):s.setAttribute("class","citrus-arrows");var i=document.createElement("DIV");i.setAttribute("class","slide-arrow left-arrow");var n=document.createElement("DIV");n.setAttribute("class","slide-arrow right-arrow"),s.appendChild(i),s.appendChild(n),e.appendChild(s),t.arrows=[i,n];var r=document.createElement("DIV");t.slides=r,r.classList.add("citrus-slides"),"pan"===t.settings.slideTransition&&(r.style.width=t.num+"00%");"pan"===t.settings.slideTransition&&(r.style.width=t.num+"00%",r.style.transform="translateX(-"+t.settings.slideIndex/t.num*100+"%)");var a={slide:null,slideWrap:null};for(let e=0;e<t.num;e++)a.slideWrap=document.createElement("DIV"),a.slideWrap.setAttribute("style","animation-duration:"+t.settings.animationDuration+"s"),e===t.settings.slideIndex?a.slideWrap.setAttribute("class","slide-wrap current-slide"):a.slideWrap.setAttribute("class","slide-wrap"),a.slide=document.createElement("DIV"),a.slide.setAttribute("class","slide"),a.slideText=t.slideText[e],a.slideText.setAttribute("class","slide-text"),a.slide.style.backgroundImage="url("+t.imgUrls[e]+")",a.slideWrap.appendChild(a.slide),a.slideWrap.appendChild(a.slideText),r.appendChild(a.slideWrap);e.appendChild(r),t.indicators={};var l=document.createElement("DIV");0==t.settings.showIndicators?l.setAttribute("class","citrus-indicators hidden"):l.setAttribute("class","citrus-indicators");for(let s=0;s<t.num;s++){var o=document.createElement("SPAN");s===t.settings.slideIndex?o.setAttribute("class","slide-indicator current-indicator"):o.setAttribute("class","slide-indicator"),o.setAttribute("data-slide",s),l.appendChild(o),e.appendChild(l),t.indicators[s]=o}t.sliderContainer.innerHTML="",t.sliderContainer.appendChild(e),function(t){for(var e=0;e<t.arrows.length;e++)t.arrows[e].addEventListener("click",function(e){t.settings.autoPause&&(t.settings.paused=!0),t.sliderContainer.classList.contains("animating")||(t.settings.prevIndex=t.settings.slideIndex,e.target.classList.contains("left-arrow")?t.settings.slideIndex--:e.target.classList.contains("right-arrow")&&t.settings.slideIndex++,d(t))});for(e=0;e<t.num;e++)t.indicators[e].addEventListener("click",function(e){t.settings.autoPause&&(t.settings.paused=!0),t.sliderContainer.classList.contains("animating")||!1===e.target.classList.contains("current-indicator")&&(t.settings.prevIndex=t.settings.slideIndex,t.settings.slideIndex=Number(e.target.dataset.slide),d(t))})}(t)}(t)}function d(t){if(clearTimeout(t.intervalSlideChange),t.prevSlide=t.sliderContainer.getElementsByClassName("current-slide")[0],t.settings.slideIndex<0?(t.settings.slideIndex=t.num-1,t.num&&(t.indicators[0].parentElement.classList.add("transition-last"),setTimeout(function(){t.indicators[0].parentElement.classList.remove("transition-last")},1e3))):t.settings.slideIndex>t.num-1&&(t.settings.slideIndex=0,t.num&&(t.indicators[0].parentElement.classList.add("transition-first"),setTimeout(function(){t.indicators[0].parentElement.classList.remove("transition-first")},1e3))),t.num>1){t.sliderContainer.classList.remove("forwards","backwards");for(var e=0;e<t.num;e++)t.slides.children[e].classList.remove("current-slide","prev-slide","next-slide"),t.num&&t.indicators[e].classList.remove("current-indicator");t.settings.prevIndex<t.settings.slideIndex?t.sliderContainer.classList.add("forwards"):t.sliderContainer.classList.add("backwards"),t.prevSlide.classList.add("prev-slide"),t.settings.slideIndex===t.num-1?t.slides.children[0].classList.add("next-slide"):t.slides.children[t.settings.slideIndex+1]&&t.slides.children[t.settings.slideIndex+1].classList.add("next-slide"),t.slides.children[t.settings.slideIndex].classList.add("current-slide"),t.num&&t.indicators[t.settings.slideIndex].classList.add("current-indicator"),"pan"===t.settings.slideTransition&&(t.sliderContainer.children[1].style.transform="translateX(-"+t.settings.slideIndex/t.num*100+"%)"),t.sliderContainer.classList.add("animating"),t.intervalPrevAnim=setTimeout(function(){t.sliderContainer.classList.remove("animating")},1e3*t.settings.animationDuration),l(t)}}function l(t){!1===t.settings.paused&&(t.intervalSlideChange=setTimeout(function(){t.settings.slideIndex++,d(t)},t.settings.slideDuration))}return t}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNpdHJ1cy1zbGlkZXIuanMiXSwibmFtZXMiOlsiZ2V0U2xpZGVycyIsInNsaWRlck9iamVjdHMiLCJTbGlkZXIiLCJbb2JqZWN0IE9iamVjdF0iLCJlbCIsInRoaXMiLCJzbGlkZXJDb250YWluZXIiLCJzbGlkZVRleHQiLCJuIiwibGVuZ3RoIiwiZ2V0Q29udGVudCIsImNoaWxkcmVuIiwibnVtIiwiaW1nVXJscyIsIkFycmF5IiwiZnJvbSIsIm1hcCIsImUiLCJpIiwic3JjIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJyZW1vdmUiLCJnZXRJbWFnZXMiLCJzZXR0aW5ncyIsImFuaW1hdGVUZXh0IiwiYW5pbWF0aW9uRHVyYXRpb24iLCJhdXRvSGVpZ2h0IiwiYXV0b1BhdXNlIiwiZWZmZWN0IiwiZWZmZWN0VHlwZSIsImhlaWdodCIsInBhdXNlZCIsInNob3dBcnJvd3MiLCJzaG93SW5kaWNhdG9ycyIsInNsaWRlRHVyYXRpb24iLCJzbGlkZUluZGV4Iiwic2xpZGVUcmFuc2l0aW9uIiwid2lkdGgiLCJwcm90b3R5cGUiLCJnb1RvU2xpZGUiLCJzbGlkZSIsInNsaWRlckNoYW5nZSIsInN0b3AiLCJwcmV2U2xpZGUiLCJuZXh0U2xpZGUiLCJyZXNldCIsInNsaWRlckluaXQiLCJhdXRvU2xpZGUiLCJzbGlkZXJzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZ2V0U2V0dGluZ3MiLCJjYiIsImhhc0F0dHJpYnV0ZSIsIkpTT04iLCJwYXJzZSIsImRhdGFzZXQiLCJjaXRydXMiLCJrZXkiLCJPYmplY3QiLCJrZXlzIiwicmVtb3ZlQXR0cmlidXRlIiwidGV4dEhlaWdodCIsIm9mZnNldEhlaWdodCIsInNldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImFkZCIsImZyYWdtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImFycm93Q29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsImFycm93TGVmdCIsImFycm93UmlnaHQiLCJhcHBlbmRDaGlsZCIsImFycm93cyIsInNsaWRlcyIsInN0eWxlIiwidHJhbnNmb3JtIiwic2xpZGVGcmFnbWVudCIsInNsaWRlV3JhcCIsImJhY2tncm91bmRJbWFnZSIsImluZGljYXRvcnMiLCJpbmRpY2F0b3JzQ29udGFpbmVyIiwiaW5kaWNhdG9yIiwiaW5uZXJIVE1MIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5zIiwicHJldkluZGV4IiwidGFyZ2V0IiwiTnVtYmVyIiwic2V0QmluZGluZ3MiLCJzbGlkZXJDb25zdHJ1Y3QiLCJjbGVhclRpbWVvdXQiLCJpbnRlcnZhbFNsaWRlQ2hhbmdlIiwicGFyZW50RWxlbWVudCIsInNldFRpbWVvdXQiLCJpbnRlcnZhbFByZXZBbmltIl0sIm1hcHBpbmdzIjoiQUFjQSxhQUdBLElBQUlBLFdBQWEsV0FFZixJQUFJQyxXQUVFQyxFQUNKQyxZQUFZQyxHQUNWQyxLQUFLQyxnQkFBa0JGLEVBQ3ZCQyxLQUFLRSxVQXVFVCxTQUFvQkgsR0FDbEIsSUFBSUcsS0FDSixJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSUosRUFBR0ssT0FBUUQsSUFDN0JELEVBQVVDLEdBQUtKLEVBQUdJLEdBRXBCLE9BQU9ELEVBNUVZRyxDQUFXTixFQUFHTyxVQUMvQk4sS0FBS08sSUFBTVIsRUFBR08sU0FBU0YsT0FDdkJKLEtBQUtRLFFBOEVULFNBQW1CVCxHQU1qQixPQUxXVSxNQUFNQyxLQUFLWCxFQUFHTyxVQUFVSyxJQUFJLFNBQVVDLEVBQUdDLEdBQ2xELElBQUlDLEVBQU1GLEVBQUVHLHFCQUFxQixPQUFPLEdBQUdELElBRTNDLE9BREFGLEVBQUVHLHFCQUFxQixPQUFPLEdBQUdDLFNBQzFCRixJQWxGUUcsQ0FBVWxCLEdBQ3pCQyxLQUFLa0IsVUFFSEMsYUFBYSxFQUNiQyxrQkFBbUIsR0FDbkJDLFlBQVksRUFDWkMsV0FBVyxFQUNYQyxRQUFRLEVBQ1JDLFdBQVksT0FDWkMsT0FBUSxPQUNSQyxRQUFRLEVBQ1JDLFlBQVksRUFDWkMsZ0JBQWdCLEVBQ2hCQyxj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LGNBRXRCakQsRUFBRU0sU0FBU1ksYUFBZWxCLEVBQUVMLElBQU0sRUFDcENLLEVBQUUwRCxPQUFPaEUsU0FBUyxHQUFHc0QsVUFBVUMsSUFBSSxjQUUvQmpELEVBQUUwRCxPQUFPaEUsU0FBU00sRUFBRU0sU0FBU1ksV0FBYSxJQUM1Q2xCLEVBQUUwRCxPQUFPaEUsU0FBU00sRUFBRU0sU0FBU1ksV0FBYSxHQUFHOEIsVUFBVUMsSUFBSSxjQUkvRGpELEVBQUUwRCxPQUFPaEUsU0FBU00sRUFBRU0sU0FBU1ksWUFBWThCLFVBQVVDLElBQUksaUJBQ25EakQsRUFBRUwsS0FDSkssRUFBRWdFLFdBQVdoRSxFQUFFTSxTQUFTWSxZQUFZOEIsVUFBVUMsSUFBSSxxQkFFakIsUUFBL0JqRCxFQUFFTSxTQUFTYSxrQkFDYm5CLEVBQUVYLGdCQUFnQkssU0FBUyxHQUFHaUUsTUFBTUMsVUFBWSxlQUFpQjVELEVBQUVNLFNBQVNZLFdBQWFsQixFQUFFTCxJQUFNLElBQU0sTUFJekdLLEVBQUVYLGdCQUFnQjJELFVBQVVDLElBQUksYUFDaENqRCxFQUFFK0UsaUJBQW1CRCxXQUFXLFdBQzlCOUUsRUFBRVgsZ0JBQWdCMkQsVUFBVTVDLE9BQU8sY0FDSCxJQUEvQkosRUFBRU0sU0FBU0UsbUJBQ2RzQixFQUFVOUIsSUFLZCxTQUFTOEIsRUFBVTlCLElBQ1MsSUFBdEJBLEVBQUVNLFNBQVNRLFNBQ2JkLEVBQUU0RSxvQkFBc0JFLFdBQVcsV0FDakM5RSxFQUFFTSxTQUFTWSxhQUNUTSxFQUFheEIsSUFDZEEsRUFBRU0sU0FBU1csZ0JBS2xCLE9BQU9qQyxFQTNVUSIsImZpbGUiOiJjaXRydXMtc2xpZGVyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAgICAgICAuX18gIF9fICAgICAgICAgICAgICAgICAgICAgICBcclxuICBfX19fIHxfX3wvICB8X19fX19fX18gX18gX18gIF9fX19fX1xyXG5fLyBfX19cXHwgIFxcICAgX19cXF8gIF9fIFxcICB8ICBcXC8gIF9fXy9cclxuXFwgIFxcX19ffCAgfHwgIHwgIHwgIHwgXFwvICB8ICAvXFxfX18gXFwgXHJcbiBcXF9fXyAgPl9ffHxfX3wgIHxfX3wgIHxfX19fLy9fX19fICA+XHJcbiAgICAgXFwvICAgICAgICAgICAgICAgICAgICAgICAgICAgXFwvIFxyXG4gVmVyc2lvbjogMS4wLjZcclxuICBBdXRob3I6IE1pY2hhZWwgSXNlYXJkXHJcbiBXZWJzaXRlOiBodHRwczovL2NpdHJ1cy5pc2VhcmRtZWRpYS5jb21cclxuICAgIERvY3M6IGh0dHBzOi8vZ2l0ZWEuaXNlYXJkbWVkaWEuY29tL21pY2hhZWwvY2l0cnVzLVNsaWRlclxyXG4gICAgUmVwbzogaHR0cHM6Ly9naXRlYS5pc2VhcmRtZWRpYS5jb20vbWljaGFlbC9jaXRydXMtU2xpZGVyXHJcbiAqL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCJcclxuXHJcbi8vIENSRUFURSBTTElERVIgT0JKRUNUU1xyXG52YXIgZ2V0U2xpZGVycyA9IChmdW5jdGlvbiAoKSB7XHJcblxyXG4gIHZhciBzbGlkZXJPYmplY3RzID0gW11cclxuXHJcbiAgY2xhc3MgU2xpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGVsKSB7XHJcbiAgICAgIHRoaXMuc2xpZGVyQ29udGFpbmVyID0gZWw7XHJcbiAgICAgIHRoaXMuc2xpZGVUZXh0ID0gZ2V0Q29udGVudChlbC5jaGlsZHJlbik7XHJcbiAgICAgIHRoaXMubnVtID0gZWwuY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgICB0aGlzLmltZ1VybHMgPSBnZXRJbWFnZXMoZWwpO1xyXG4gICAgICB0aGlzLnNldHRpbmdzID0ge1xyXG4gICAgICAgIC8vIGRlZmF1bHQgc2V0dGluZ3NcclxuICAgICAgICBhbmltYXRlVGV4dDogdHJ1ZSxcclxuICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogMC44LFxyXG4gICAgICAgIGF1dG9IZWlnaHQ6IGZhbHNlLFxyXG4gICAgICAgIGF1dG9QYXVzZTogdHJ1ZSxcclxuICAgICAgICBlZmZlY3Q6IHRydWUsXHJcbiAgICAgICAgZWZmZWN0VHlwZTogJ3pvb20nLFxyXG4gICAgICAgIGhlaWdodDogXCIxMDAlXCIsXHJcbiAgICAgICAgcGF1c2VkOiBmYWxzZSxcclxuICAgICAgICBzaG93QXJyb3dzOiB0cnVlLFxyXG4gICAgICAgIHNob3dJbmRpY2F0b3JzOiB0cnVlLFxyXG4gICAgICAgIHNsaWRlRHVyYXRpb246IDUwMDAsXHJcbiAgICAgICAgc2xpZGVJbmRleDogMCxcclxuICAgICAgICBzbGlkZVRyYW5zaXRpb246IFwicGFuXCIsXHJcbiAgICAgICAgd2lkdGg6IFwiMTAwJVwiXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIHB1YmxpYyBmdW5jdGlvbnNcclxuICBTbGlkZXIucHJvdG90eXBlLmdvVG9TbGlkZSA9IGZ1bmN0aW9uIChzbGlkZSkge1xyXG4gICAgdGhpcy5zZXR0aW5ncy5zbGlkZUluZGV4ID0gc2xpZGU7XHJcbiAgICBzbGlkZXJDaGFuZ2UodGhpcyk7XHJcbiAgfVxyXG4gIFNsaWRlci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHt9XHJcbiAgU2xpZGVyLnByb3RvdHlwZS5wcmV2U2xpZGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLnNldHRpbmdzLnNsaWRlSW5kZXgtLTtcclxuICAgIHNsaWRlckNoYW5nZSh0aGlzKTtcclxuICB9XHJcbiAgU2xpZGVyLnByb3RvdHlwZS5uZXh0U2xpZGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLnNldHRpbmdzLnNsaWRlSW5kZXgrKztcclxuICAgIHNsaWRlckNoYW5nZSh0aGlzKTtcclxuICB9XHJcbiAgU2xpZGVyLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHNsaWRlckluaXQodGhpcyk7XHJcbiAgICBhdXRvU2xpZGUodGhpcyk7XHJcbiAgfVxyXG5cclxuICBsZXQgc2xpZGVycyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2NpdHJ1cy1zbGlkZXInKVxyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpZGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgc2xpZGVyT2JqZWN0c1tpXSA9IG5ldyBTbGlkZXIoc2xpZGVyc1tpXSlcclxuICAgIHZhciBlID0gc2xpZGVyT2JqZWN0c1tpXVxyXG4gICAgZ2V0U2V0dGluZ3MoZSwgc2xpZGVySW5pdClcclxuICAgIGF1dG9TbGlkZShlKVxyXG4gIH1cclxuXHJcbiAgLy8gR0VUIFNFVFRJTkdTIEZST00gREFUQSBBVFRSSUJVVEVcclxuICBmdW5jdGlvbiBnZXRTZXR0aW5ncyhlLCBjYikge1xyXG4gICAgLy8gZ2V0IHNldHRpbmdzIGZyb20gZGF0YSBhdHRyaWJ1dGVcclxuICAgIGlmIChlLnNsaWRlckNvbnRhaW5lci5oYXNBdHRyaWJ1dGUoJ2RhdGEtY2l0cnVzJykpIHtcclxuICAgICAgdmFyIHNldHRpbmdzID0gSlNPTi5wYXJzZShlLnNsaWRlckNvbnRhaW5lci5kYXRhc2V0LmNpdHJ1cylcclxuICAgICAgLy8gdXBkYXRlIG9iamVjdFxyXG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhzZXR0aW5ncykpIHtcclxuICAgICAgICBlLnNldHRpbmdzW2tleV0gPSBzZXR0aW5nc1trZXldXHJcbiAgICAgIH1cclxuICAgICAgZS5zbGlkZXJDb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWNpdHJ1cycpXHJcbiAgICAgIGlmIChlLnNldHRpbmdzLnNsaWRlSW5kZXggPiBlLm51bSB8fCBlLnNldHRpbmdzLnNsaWRlSW5kZXggPD0gMCkge1xyXG4gICAgICAgIGUuc2V0dGluZ3Muc2xpZGVJbmRleCA9IDA7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZS5zZXR0aW5ncy5zbGlkZUluZGV4LS1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgIGNiKGUpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBHRVQgU0xJREVTIElOTkVSIENPTlRFTlRcclxuICBmdW5jdGlvbiBnZXRDb250ZW50KGVsKSB7XHJcbiAgICB2YXIgc2xpZGVUZXh0ID0ge31cclxuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZWwubGVuZ3RoOyBuKyspIHtcclxuICAgICAgc2xpZGVUZXh0W25dID0gZWxbbl1cclxuICAgIH1cclxuICAgIHJldHVybiBzbGlkZVRleHRcclxuICB9XHJcblxyXG4gIC8vIEdFVCBJTUFHRSBVUkxTIEZST00gU0xJREVTXHJcbiAgZnVuY3Rpb24gZ2V0SW1hZ2VzKGVsKSB7XHJcbiAgICB2YXIgdXJscyA9IEFycmF5LmZyb20oZWwuY2hpbGRyZW4pLm1hcChmdW5jdGlvbiAoZSwgaSkge1xyXG4gICAgICB2YXIgc3JjID0gZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW1nJylbMF0uc3JjXHJcbiAgICAgIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2ltZycpWzBdLnJlbW92ZSgpXHJcbiAgICAgIHJldHVybiBzcmNcclxuICAgIH0pXHJcbiAgICByZXR1cm4gdXJsc1xyXG4gIH1cclxuXHJcbiAgLy8gQ0FMQ1VMQVRFIEhFSUdIVCBPRiBHSVZFTiBTTElERVIgRUxFTUVOVFxyXG4gIGZ1bmN0aW9uIGF1dG9IZWlnaHQoZSkge1xyXG4gICAgdmFyIGhlaWdodCA9IDBcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZS5udW07IGkrKykge1xyXG4gICAgICBsZXQgdGV4dEhlaWdodCA9IGUuc2xpZGVUZXh0W2ldLm9mZnNldEhlaWdodFxyXG4gICAgICBpZiAoaGVpZ2h0IDwgdGV4dEhlaWdodCkge1xyXG4gICAgICAgIGhlaWdodCA9IHRleHRIZWlnaHRcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaGVpZ2h0ICs9IDI1MFxyXG4gICAgcmV0dXJuIGhlaWdodCArIFwicHhcIlxyXG4gIH1cclxuXHJcbiAgLy8gU0VUUyBDTEFTU0VTIEFORCBTSVpFIFNMSURFUiBDT05UQUlORVJcclxuICBmdW5jdGlvbiBzbGlkZXJJbml0KGUpIHtcclxuICAgIHZhciBoZWlnaHQgPSBlLnNldHRpbmdzLmhlaWdodFxyXG4gICAgaWYgKGUuc2V0dGluZ3MuYXV0b0hlaWdodCA9PT0gdHJ1ZSkge1xyXG4gICAgICBoZWlnaHQgPSBhdXRvSGVpZ2h0KGUpXHJcbiAgICB9XHJcbiAgICBlLnNsaWRlckNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIndpZHRoOlwiICsgZS5zZXR0aW5ncy53aWR0aCArIFwiOyBoZWlnaHQ6XCIgKyBoZWlnaHQpXHJcbiAgICBlLnNsaWRlckNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNpdHJ1cy1zbGlkZXJcIilcclxuICAgIC8vIHNldCBjb250YWluZXIgY2xhc3Nlc1xyXG4gICAgZS5zbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRyYW5zaXRpb24tXCIgKyBlLnNldHRpbmdzLnNsaWRlVHJhbnNpdGlvbilcclxuICAgIGlmIChlLnNldHRpbmdzLmVmZmVjdCkge1xyXG4gICAgICBlLnNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiZWZmZWN0LVwiICsgZS5zZXR0aW5ncy5lZmZlY3RUeXBlKVxyXG4gICAgfVxyXG4gICAgaWYgKGUuc2V0dGluZ3MuYW5pbWF0ZVRleHQpIHtcclxuICAgICAgZS5zbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZS10ZXh0JylcclxuICAgIH1cclxuICAgIHNsaWRlckNvbnN0cnVjdChlKVxyXG4gIH1cclxuXHJcbiAgLy8gQ09OU1RSVUNUIERPTSBFTEVNRU5UU1xyXG4gIGZ1bmN0aW9uIHNsaWRlckNvbnN0cnVjdChlKSB7XHJcbiAgICB2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG4gICAgLy8gY3JlYXRlIGFycm93c1xyXG4gICAgdmFyIGFycm93Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkRJVlwiKVxyXG4gICAgaWYgKGUuc2V0dGluZ3Muc2hvd0Fycm93cyA9PSBmYWxzZSkge1xyXG4gICAgICBhcnJvd0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNpdHJ1cy1hcnJvd3MgaGlkZGVuXCIpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhcnJvd0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNpdHJ1cy1hcnJvd3NcIilcclxuICAgIH1cclxuICAgIHZhciBhcnJvd0xlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpXHJcbiAgICBhcnJvd0xlZnQuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJzbGlkZS1hcnJvdyBsZWZ0LWFycm93XCIpXHJcbiAgICB2YXIgYXJyb3dSaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJESVZcIilcclxuICAgIGFycm93UmlnaHQuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJzbGlkZS1hcnJvdyByaWdodC1hcnJvd1wiKVxyXG4gICAgYXJyb3dDb250YWluZXIuYXBwZW5kQ2hpbGQoYXJyb3dMZWZ0KVxyXG4gICAgYXJyb3dDb250YWluZXIuYXBwZW5kQ2hpbGQoYXJyb3dSaWdodClcclxuICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGFycm93Q29udGFpbmVyKVxyXG4gICAgZS5hcnJvd3MgPSBbYXJyb3dMZWZ0LCBhcnJvd1JpZ2h0XVxyXG5cclxuICAgIC8vIGNyZWF0ZSBzbGlkZXNcclxuICAgIHZhciBzbGlkZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpO1xyXG4gICAgZS5zbGlkZXMgPSBzbGlkZXNcclxuICAgIHNsaWRlcy5jbGFzc0xpc3QuYWRkKFwiY2l0cnVzLXNsaWRlc1wiKVxyXG4gICAgaWYgKGUuc2V0dGluZ3Muc2xpZGVUcmFuc2l0aW9uID09PSBcInBhblwiKSB7XHJcbiAgICAgIHNsaWRlcy5zdHlsZS53aWR0aCA9IGUubnVtICsgJzAwJSdcclxuICAgIH1cclxuICAgIC8vIHNldCBjb250YWluZXIgd2lkdGhcclxuICAgIGlmIChlLnNldHRpbmdzLnNsaWRlVHJhbnNpdGlvbiA9PT0gXCJwYW5cIikge1xyXG4gICAgICBzbGlkZXMuc3R5bGUud2lkdGggPSBlLm51bSArICcwMCUnXHJcbiAgICAgIHNsaWRlcy5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgtJyArIGUuc2V0dGluZ3Muc2xpZGVJbmRleCAvIGUubnVtICogMTAwICsgJyUpJ1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBzbGlkZUZyYWdtZW50ID0ge31cclxuICAgIHNsaWRlRnJhZ21lbnQuc2xpZGUgPSBudWxsXHJcbiAgICBzbGlkZUZyYWdtZW50LnNsaWRlV3JhcCA9IG51bGxcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGUubnVtOyBpKyspIHtcclxuICAgICAgc2xpZGVGcmFnbWVudC5zbGlkZVdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpXHJcbiAgICAgIHNsaWRlRnJhZ21lbnQuc2xpZGVXcmFwLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYW5pbWF0aW9uLWR1cmF0aW9uOlwiICsgZS5zZXR0aW5ncy5hbmltYXRpb25EdXJhdGlvbiArIFwic1wiKVxyXG4gICAgICBpZiAoaSA9PT0gZS5zZXR0aW5ncy5zbGlkZUluZGV4KSB7XHJcbiAgICAgICAgc2xpZGVGcmFnbWVudC5zbGlkZVdyYXAuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJzbGlkZS13cmFwIGN1cnJlbnQtc2xpZGVcIilcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzbGlkZUZyYWdtZW50LnNsaWRlV3JhcC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInNsaWRlLXdyYXBcIilcclxuICAgICAgfVxyXG4gICAgICBzbGlkZUZyYWdtZW50LnNsaWRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkRJVlwiKVxyXG4gICAgICBzbGlkZUZyYWdtZW50LnNsaWRlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwic2xpZGVcIilcclxuICAgICAgc2xpZGVGcmFnbWVudC5zbGlkZVRleHQgPSBlLnNsaWRlVGV4dFtpXVxyXG4gICAgICBzbGlkZUZyYWdtZW50LnNsaWRlVGV4dC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInNsaWRlLXRleHRcIilcclxuICAgICAgc2xpZGVGcmFnbWVudC5zbGlkZS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybChcIiArIGUuaW1nVXJsc1tpXSArIFwiKVwiXHJcbiAgICAgIHNsaWRlRnJhZ21lbnQuc2xpZGVXcmFwLmFwcGVuZENoaWxkKHNsaWRlRnJhZ21lbnQuc2xpZGUpXHJcbiAgICAgIHNsaWRlRnJhZ21lbnQuc2xpZGVXcmFwLmFwcGVuZENoaWxkKHNsaWRlRnJhZ21lbnQuc2xpZGVUZXh0KVxyXG4gICAgICBzbGlkZXMuYXBwZW5kQ2hpbGQoc2xpZGVGcmFnbWVudC5zbGlkZVdyYXApXHJcbiAgICB9XHJcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChzbGlkZXMpXHJcblxyXG4gICAgLy8gY3JlYXRlIGluZGljYXRvciBlbGVtZW50c1xyXG4gICAgZS5pbmRpY2F0b3JzID0ge31cclxuICAgIHZhciBpbmRpY2F0b3JzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkRJVlwiKVxyXG4gICAgaWYgKGUuc2V0dGluZ3Muc2hvd0luZGljYXRvcnMgPT0gZmFsc2UpIHtcclxuICAgICAgaW5kaWNhdG9yc0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNpdHJ1cy1pbmRpY2F0b3JzIGhpZGRlblwiKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaW5kaWNhdG9yc0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNpdHJ1cy1pbmRpY2F0b3JzXCIpXHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGUubnVtOyBpKyspIHtcclxuICAgICAgdmFyIGluZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJTUEFOXCIpO1xyXG4gICAgICBpZiAoaSA9PT0gZS5zZXR0aW5ncy5zbGlkZUluZGV4KSB7XHJcbiAgICAgICAgaW5kaWNhdG9yLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwic2xpZGUtaW5kaWNhdG9yIGN1cnJlbnQtaW5kaWNhdG9yXCIpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaW5kaWNhdG9yLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwic2xpZGUtaW5kaWNhdG9yXCIpXHJcbiAgICAgIH1cclxuICAgICAgaW5kaWNhdG9yLnNldEF0dHJpYnV0ZShcImRhdGEtc2xpZGVcIiwgaSlcclxuICAgICAgaW5kaWNhdG9yc0NvbnRhaW5lci5hcHBlbmRDaGlsZChpbmRpY2F0b3IpXHJcbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGluZGljYXRvcnNDb250YWluZXIpXHJcbiAgICAgIGUuaW5kaWNhdG9yc1tpXSA9IGluZGljYXRvclxyXG4gICAgfVxyXG5cclxuICAgIGUuc2xpZGVyQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCJcclxuICAgIGUuc2xpZGVyQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KVxyXG4gICAgc2V0QmluZGluZ3MoZSlcclxuICB9XHJcblxyXG4gIC8vIENSRUFURSBCSU5ESU5HUyBGT1IgQVJST1dTIEFORCBJTkRJQ0FUT1JTXHJcbiAgZnVuY3Rpb24gc2V0QmluZGluZ3MoZSkge1xyXG5cclxuICAgIC8vIGJpbmQgYXJyb3cgY2xpY2sgZnVuY3Rpb25zXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGUuYXJyb3dzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGUuYXJyb3dzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgaWYgKGUuc2V0dGluZ3MuYXV0b1BhdXNlKSB7XHJcbiAgICAgICAgICBlLnNldHRpbmdzLnBhdXNlZCA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGUuc2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucyhcImFuaW1hdGluZ1wiKSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlLnNldHRpbmdzLnByZXZJbmRleCA9IGUuc2V0dGluZ3Muc2xpZGVJbmRleFxyXG4gICAgICAgIGlmIChlbC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdsZWZ0LWFycm93JykpIHtcclxuICAgICAgICAgIGUuc2V0dGluZ3Muc2xpZGVJbmRleC0tXHJcbiAgICAgICAgfSBlbHNlIGlmIChlbC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyaWdodC1hcnJvdycpKSB7XHJcbiAgICAgICAgICBlLnNldHRpbmdzLnNsaWRlSW5kZXgrK1xyXG4gICAgICAgIH1cclxuICAgICAgICBzbGlkZXJDaGFuZ2UoZSlcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvLyBiaW5kIGluZGljYXRvciBjbGljayBmdW5jdGlvbnNcclxuICAgIGZvciAoaSA9IDA7IGkgPCBlLm51bTsgaSsrKSB7XHJcbiAgICAgIGUuaW5kaWNhdG9yc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGlmIChlLnNldHRpbmdzLmF1dG9QYXVzZSkge1xyXG4gICAgICAgICAgZS5zZXR0aW5ncy5wYXVzZWQgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlLnNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoXCJhbmltYXRpbmdcIikpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGVsLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2N1cnJlbnQtaW5kaWNhdG9yJykgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICBlLnNldHRpbmdzLnByZXZJbmRleCA9IGUuc2V0dGluZ3Muc2xpZGVJbmRleFxyXG4gICAgICAgICAgZS5zZXR0aW5ncy5zbGlkZUluZGV4ID0gTnVtYmVyKGVsLnRhcmdldC5kYXRhc2V0LnNsaWRlKVxyXG5cclxuICAgICAgICAgIHNsaWRlckNoYW5nZShlKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFVQREFURVMgU0xJREUgQ0xBU1NFUyBCQVNFRCBPTiBQUkVWSU9VUyBBTkQgQ1VSUkVOVCBJTkRFWEVTIFxyXG4gIGZ1bmN0aW9uIHNsaWRlckNoYW5nZShlKSB7XHJcbiAgICBjbGVhclRpbWVvdXQoZS5pbnRlcnZhbFNsaWRlQ2hhbmdlKVxyXG4gICAgZS5wcmV2U2xpZGUgPSBlLnNsaWRlckNvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjdXJyZW50LXNsaWRlJylbMF1cclxuXHJcbiAgICAvLyBjYWxjdWxhdGUgc2xpZGUgaW5kZXhcclxuICAgIGlmIChlLnNldHRpbmdzLnNsaWRlSW5kZXggPCAwKSB7XHJcbiAgICAgIGUuc2V0dGluZ3Muc2xpZGVJbmRleCA9IGUubnVtIC0gMVxyXG4gICAgICBpZiAoZS5udW0pIHtcclxuICAgICAgICBlLmluZGljYXRvcnNbMF0ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCd0cmFuc2l0aW9uLWxhc3QnKVxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgZS5pbmRpY2F0b3JzWzBdLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgndHJhbnNpdGlvbi1sYXN0JylcclxuICAgICAgICB9LCAxMDAwKVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGUuc2V0dGluZ3Muc2xpZGVJbmRleCA+IGUubnVtIC0gMSkge1xyXG4gICAgICBlLnNldHRpbmdzLnNsaWRlSW5kZXggPSAwXHJcbiAgICAgIGlmIChlLm51bSkge1xyXG4gICAgICAgIGUuaW5kaWNhdG9yc1swXS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3RyYW5zaXRpb24tZmlyc3QnKVxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgZS5pbmRpY2F0b3JzWzBdLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgndHJhbnNpdGlvbi1maXJzdCcpXHJcbiAgICAgICAgfSwgMTAwMClcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHNldCBjbGFzc2VzIGJhc2VkIG9uIHNsaWRlIGluZGV4XHJcbiAgICBpZiAoZS5udW0gPiAxKSB7XHJcbiAgICAgIC8vIHJlbW92ZSBjdXJyZW50IHN0eWxlc1xyXG4gICAgICBlLnNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdmb3J3YXJkcycsICdiYWNrd2FyZHMnKVxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGUubnVtOyBpKyspIHtcclxuICAgICAgICBlLnNsaWRlcy5jaGlsZHJlbltpXS5jbGFzc0xpc3QucmVtb3ZlKCdjdXJyZW50LXNsaWRlJywgJ3ByZXYtc2xpZGUnLCAnbmV4dC1zbGlkZScpXHJcbiAgICAgICAgaWYgKGUubnVtKSB7XHJcbiAgICAgICAgICBlLmluZGljYXRvcnNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnY3VycmVudC1pbmRpY2F0b3InKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvLyBhZGQgZGlyZWN0aW9uIGNsYXNzXHJcbiAgICAgIGlmIChlLnNldHRpbmdzLnByZXZJbmRleCA8IGUuc2V0dGluZ3Muc2xpZGVJbmRleCkge1xyXG4gICAgICAgIGUuc2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2ZvcndhcmRzJylcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBlLnNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdiYWNrd2FyZHMnKVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBhZGQgcHJldmlvdXMgc2xpZGVcclxuICAgICAgZS5wcmV2U2xpZGUuY2xhc3NMaXN0LmFkZCgncHJldi1zbGlkZScpXHJcblxyXG4gICAgICBpZiAoZS5zZXR0aW5ncy5zbGlkZUluZGV4ID09PSBlLm51bSAtIDEpIHtcclxuICAgICAgICBlLnNsaWRlcy5jaGlsZHJlblswXS5jbGFzc0xpc3QuYWRkKCduZXh0LXNsaWRlJylcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoZS5zbGlkZXMuY2hpbGRyZW5bZS5zZXR0aW5ncy5zbGlkZUluZGV4ICsgMV0pIHtcclxuICAgICAgICAgIGUuc2xpZGVzLmNoaWxkcmVuW2Uuc2V0dGluZ3Muc2xpZGVJbmRleCArIDFdLmNsYXNzTGlzdC5hZGQoJ25leHQtc2xpZGUnKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZS5zbGlkZXMuY2hpbGRyZW5bZS5zZXR0aW5ncy5zbGlkZUluZGV4XS5jbGFzc0xpc3QuYWRkKCdjdXJyZW50LXNsaWRlJylcclxuICAgICAgaWYgKGUubnVtKSB7XHJcbiAgICAgICAgZS5pbmRpY2F0b3JzW2Uuc2V0dGluZ3Muc2xpZGVJbmRleF0uY2xhc3NMaXN0LmFkZCgnY3VycmVudC1pbmRpY2F0b3InKVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChlLnNldHRpbmdzLnNsaWRlVHJhbnNpdGlvbiA9PT0gXCJwYW5cIikge1xyXG4gICAgICAgIGUuc2xpZGVyQ29udGFpbmVyLmNoaWxkcmVuWzFdLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKC0nICsgZS5zZXR0aW5ncy5zbGlkZUluZGV4IC8gZS5udW0gKiAxMDAgKyAnJSknXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGFkZCBhbmQgcmVtb3ZlIGFuaW1hdGluZyBjbGFzcyB0byBzbGlkZXIgY29udGFpbmVyXHJcbiAgICAgIGUuc2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGluZycpXHJcbiAgICAgIGUuaW50ZXJ2YWxQcmV2QW5pbSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGUuc2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGluZycpXHJcbiAgICAgIH0sIGUuc2V0dGluZ3MuYW5pbWF0aW9uRHVyYXRpb24gKiAxMDAwKVxyXG4gICAgICBhdXRvU2xpZGUoZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEFVVE9NQVRJQyBTTElERSBDSEFOR0lORyBCQVNFRCBPTiBUSU1JTkcgSU4gU0VUVElOR1NcclxuICBmdW5jdGlvbiBhdXRvU2xpZGUoZSkge1xyXG4gICAgaWYgKGUuc2V0dGluZ3MucGF1c2VkID09PSBmYWxzZSkge1xyXG4gICAgICBlLmludGVydmFsU2xpZGVDaGFuZ2UgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBlLnNldHRpbmdzLnNsaWRlSW5kZXgrK1xyXG4gICAgICAgICAgc2xpZGVyQ2hhbmdlKGUpXHJcbiAgICAgIH0sIGUuc2V0dGluZ3Muc2xpZGVEdXJhdGlvbilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIE1BS0UgU0xJREVST0JKRUNUUyBQVUJMSUMgVklBIEdFVFNMSURFUlNcclxuICByZXR1cm4gc2xpZGVyT2JqZWN0c1xyXG59KSgpIl19
